var volume=JSON.parse(window.localStorage.getItem("volume"));const videoNode=document.getElementById("videoPlayer"),videoSourceNode=document.getElementById("videoSource");var controlsHideDebounce,controlsVisible=!1,mouseOverVideo=!1,isFullScreen=!1;const videoControls=document.getElementById("video-controls"),playButton=document.getElementById("play"),playIcon=document.getElementById("playIcon"),pauseIcon=document.getElementById("pauseIcon"),timeElapsed=document.getElementById("time-elapsed"),duration=document.getElementById("duration"),progressBar=document.getElementById("progress-bar"),seek=document.getElementById("seek"),seekTooltip=document.getElementById("seek-tooltip"),volumeButton=document.getElementById("volume-button"),volumeIcons=document.querySelectorAll(".volume-button use"),volumeMute=document.querySelector('use[href="#volume-mute"]'),volumeLow=document.querySelector('use[href="#volume-low"]'),volumeHigh=document.querySelector('use[href="#volume-high"]'),volumeSlider=document.getElementById("volume"),playbackAnimation=document.getElementById("playback-animation"),bodyContainer=document.getElementById("body-container"),videoContainer=document.getElementById("video-container"),fullscreenButton=document.getElementById("fullscreen-button"),fullscreenIcons=fullscreenButton.querySelectorAll("use"),pipButton=document.getElementById("pip-button"),videoWorks=!!document.createElement("video").canPlayType;function togglePlay(){controlsVisible&&(videoNode.paused||videoNode.ended?videoNode.play():videoNode.pause())}function videoNodeClick(){controlsVisible?hideControls():showControls()}function updatePlayButton(){videoNode.paused?(playButton.setAttribute("data-title","Play (k)"),pauseIcon.classList.add("hidden"),playIcon.classList.remove("hidden")):(playButton.setAttribute("data-title","Pause (k)"),pauseIcon.classList.remove("hidden"),playIcon.classList.add("hidden"))}function formatTime(e){if(e){const i=new Date(1e3*e);var t=Math.floor(e/3600),o=i.getMinutes(),n=i.getSeconds();return{hours:(t<10?"0":"")+t,minutes:(o<10?"0":"")+o,seconds:(n<10?"0":"")+n}}return{hours:"00",minutes:"00",seconds:"00"}}function initializeVideo(){const e=Math.round(videoNode.duration);seek.setAttribute("max",e),progressBar.setAttribute("max",e);const t=formatTime(e);duration.innerText=`${t.hours}:${t.minutes}:${t.seconds}`,duration.setAttribute("datetime",`${t.hours}h ${t.minutes}m ${t.seconds}s`)}function updateTimeElapsed(){const e=formatTime(Math.round(videoNode.currentTime));timeElapsed.innerText=`${e.hours}:${e.minutes}:${e.seconds}`,timeElapsed.setAttribute("datetime",`${e.hours}h ${e.minutes}m ${e.seconds}s`)}function updateProgress(){seek.value=Math.floor(videoNode.currentTime),progressBar.value=Math.floor(videoNode.currentTime)}function updateSeekTooltip(e){const t=Math.round(e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"),10));seek.setAttribute("data-seek",t);const o=formatTime(t);seekTooltip.textContent=`${o.hours}:${o.minutes}:${o.seconds}`;const n=videoNode.getBoundingClientRect();seekTooltip.style.left=e.pageX-n.left+"px"}function skipAhead(e){if(!controlsVisible)return;const t=e.target.dataset.seek?e.target.dataset.seek:e.target.value;videoNode.currentTime=t,progressBar.value=t,seek.value=t}function updateVolume(){controlsVisible&&(videoNode.muted&&(videoNode.muted=!1),videoNode.volume=volumeSlider.value)}function updateVolumeIcon(){volumeIcons.forEach((e=>{e.classList.add("hidden")})),volumeButton.setAttribute("data-title","Mute (m)"),videoNode.muted||0===videoNode.volume?(volumeMute.classList.remove("hidden"),volumeButton.setAttribute("data-title","Unmute (m)")):videoNode.volume>0&&videoNode.volume<=.5?volumeLow.classList.remove("hidden"):volumeHigh.classList.remove("hidden")}function toggleMute(){controlsVisible&&(videoNode.muted=!videoNode.muted,videoNode.muted?(volumeSlider.setAttribute("data-volume",volumeSlider.value),volumeSlider.value=0):volumeSlider.value=volumeSlider.dataset.volume)}function animatePlayback(){playbackAnimation.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.3)"}],{duration:500})}function animatePlaybackVideoNodeClick(){controlsVisible&&animatePlayback()}function toggleFullScreenClick(){controlsVisible&&toggleFullScreen()}function toggleFullScreen(){videoNode.classList.contains("video-shown")&&(showEmbedded()||showFullScreen())}function showEmbedded(){return document.fullscreenElement?(document.exitFullscreen(),!0):!!document.webkitFullscreenElement&&(document.webkitExitFullscreen(),!0)}function showFullScreen(){videoNode.classList.contains("video-shown")&&(videoContainer.webkitRequestFullscreen?videoContainer.webkitRequestFullscreen():videoContainer.requestFullscreen&&videoContainer.requestFullscreen())}function updateFullscreenButton(){fullscreenIcons.forEach((e=>e.classList.toggle("hidden"))),document.fullscreenElement?(fullscreenButton.setAttribute("data-title","Exit full screen (f)"),videoNode.classList.remove("video","video-shown-embeded"),isFullScreen=!0):(fullscreenButton.setAttribute("data-title","Full screen (f)"),videoNode.classList.add("video","video-shown-embeded"),isFullScreen=!1)}async function togglePip(){try{videoNode!==document.pictureInPictureElement?(pipButton.disabled=!0,await videoNode.requestPictureInPicture()):await document.exitPictureInPicture()}catch(e){}finally{pipButton.disabled=!1}}function hideControls(){videoNode.paused||(controlsVisible=!1,videoControls.classList.add("hide"))}function showControls(){setTimeout((function(){controlsVisible=!0}),500),videoControls.classList.remove("hide"),controlsHideDebounce&&clearTimeout(controlsHideDebounce),controlsHideDebounce=setTimeout((function(){hideControls()}),3e3)}function showControlsIfMouseInVideo(e){mouseOverVideo&&showControls()}function mouseEnterVideo(){mouseOverVideo=!0}function mouseLeaveVideo(){mouseOverVideo=!1}function checkOrientation(e){e||(e=screen.orientation.type),"landscape-primary"===e?showFullScreen():"portrait-primary"===e&&showEmbedded()}function showVideo(){videoNode.classList.add("video-shown","video-shown-embeded")}function hideVideo(){showEmbedded(),videoNode.classList.remove("video-shown","video-shown-embeded")}function checkInView(e,t,o){let n=e.scrollTop,i=n+e.clientHeight,d=t.offsetTop,s=d+t.clientHeight;return d>=n&&s<=i||o&&(d<n&&s>n||s>i&&d<i)}videoWorks&&(videoNode.controls=!1,videoControls.classList.add("hide"),videoControls.classList.remove("hidden")),playButton.addEventListener("click",togglePlay),videoNode.addEventListener("play",updatePlayButton),videoNode.addEventListener("pause",updatePlayButton),videoNode.addEventListener("loadedmetadata",initializeVideo),videoNode.addEventListener("timeupdate",updateTimeElapsed),videoNode.addEventListener("timeupdate",updateProgress),videoNode.addEventListener("volumechange",updateVolumeIcon),videoContainer.addEventListener("mouseenter",showControls),videoContainer.addEventListener("mouseleave",hideControls),videoContainer.addEventListener("mouseenter",mouseEnterVideo),videoContainer.addEventListener("mouseleave",mouseLeaveVideo),videoContainer.addEventListener("mousemove",showControlsIfMouseInVideo),seek.addEventListener("mousemove",updateSeekTooltip),seek.addEventListener("input",skipAhead),volumeSlider.addEventListener("input",updateVolume),volumeButton.addEventListener("click",toggleMute),fullscreenButton.addEventListener("click",toggleFullScreenClick),videoContainer.addEventListener("fullscreenchange",updateFullscreenButton),videoContainer.addEventListener("mozfullscreenchange",updateFullscreenButton),videoContainer.addEventListener("webkitfullscreenchange",updateFullscreenButton),videoContainer.addEventListener("msfullscreenchange",updateFullscreenButton),pipButton.addEventListener("click",togglePip),document.addEventListener("DOMContentLoaded",(()=>{document.pictureInPictureEnabled&&pipButton.classList.add("hidden")})),screen.orientation?screen.orientation.addEventListener("change",(function(e){checkOrientation(e.currentTarget.type)})):window.addEventListener("resize",(function(e){90==Math.abs(window.orientation)?checkOrientation("landscape-primary"):0==window.orientation&&checkOrientation("portrait-primary")})),bodyContainer.addEventListener("scroll",(e=>{checkInView(bodyContainer,videoContainer,!1)?videoContainer.classList.remove("video-container-fixed"):videoContainer.classList.add("video-container-fixed")})),videoNode.volume=volume||.5,volumeSlider.value=videoNode.volume,updateVolumeIcon();