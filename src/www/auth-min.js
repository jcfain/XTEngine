var hashedPass,storedHash=window.localStorage.getItem("storedHash"),rememberPassword=!1,passwordInput=document.getElementById("password");function login(){checkPass()}function checkPass(e){var s=new XMLHttpRequest;s.open("POST","/auth",!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===s.readyState){var e=s.status;200!==e?(showAlertWindow("Error",s.statusText),401==e&&storedHash&&window.localStorage.removeItem("storedHash")):(rememberPassword&&window.localStorage.setItem("storedHash",hashedPass),document.removeEventListener("keypress",onEnter),window.location.replace(window.location.origin))}},s.onerror=function(){onSaveFail(s.statusText)},storedHash&&!e?(hashedPass=storedHash,s.send('{"hashedPass":"'+storedHash+'", "remember":"true"}')):(hashedPass=encrypt())?s.send('{"hashedPass":"'+hashedPass+'", "remember":"'+rememberPassword+'"}'):showAlertWindow("Error","Invalid password")}function encrypt(){const e=passwordInput.value;if(e.trim().length)return keccak512(e)}function rememberCheckbox(e){rememberPassword=e.checked}function onEnter(e){"Enter"===e.key&&passwordInput.value.trim().length&&checkPass(!0)}passwordInput.focus(),storedHash&&storedHash.trim().length&&checkPass(),document.addEventListener("keypress",onEnter);